(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{307:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(97),s=r(1),i=r.n(s),u=r(25),c=(r(308),function(e){var t,r,n,s={backgroundImage:"url(".concat(e.user.background,")"),backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",backgroundPosition:"center",minHeight:"421px",position:"relative",backgroundSize:"cover"},i=null;return!e.profile&&e.isAuth&&(i=a.a.createElement(u.a,{type:"button",classes:"redButton",clicked:e.openChat},"userPage.chat")),a.a.createElement("section",{className:"userpage-top",style:s},a.a.createElement("div",{className:"userpage-top__container"},a.a.createElement("div",{className:"userpage-top__text__container"},a.a.createElement("img",{src:e.user.avatar,className:"userpage-top__text__avatar"}),a.a.createElement("div",{className:"userpage-top__text__container2"},a.a.createElement("h3",{className:"userpage-top__name"},e.user.name),a.a.createElement("span",{className:"userpage-top__text"},(n=e.user.birthday,Math.floor((Date.now()-new Date(n))/31536e6)),a.a.createElement(o.a,null,"MainPage.age")),a.a.createElement("span",{className:"userpage-top__text"},e.user.country,", ",e.user.city),e.profile?null:a.a.createElement("span",{className:"userpage-top__text"},a.a.createElement(o.a,null,"community.lastonline")," ",(t=e.user.last_online,(r=Date.now()-new Date(t))<36e5?a.a.createElement(a.a.Fragment,null,Math.floor(r/6e4),a.a.createElement(o.a,null,"community.minAgo")):r<864e5?a.a.createElement(a.a.Fragment,null,Math.floor(r/36e5),a.a.createElement(o.a,null,"community.hoursAgo")):a.a.createElement(a.a.Fragment,null,Math.floor(r/864e5),a.a.createElement(o.a,null,"community.daysAgo")))))),a.a.createElement("div",{className:"userpage-top__buttons__container"},i)))});c.propTypes={user:i.a.shape({id:i.a.number,name:i.a.string,avatar:i.a.string,birthday:i.a.date,country:i.a.string,city:i.a.string,last_online:i.a.date,background:i.a.string}),profile:i.a.bool,openChat:i.a.func,isAuth:i.a.bool},t.a=c},308:function(e,t,r){var n=r(9),a=r(309);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},309:function(e,t,r){e.exports={"userpage-top":"userpage-top","userpage-top__container":"userpage-top__container","userpage-top__text__container":"userpage-top__text__container","userpage-top__text__avatar":"userpage-top__text__avatar","userpage-top__text__container2":"userpage-top__text__container2","userpage-top__name":"userpage-top__name","userpage-top__text":"userpage-top__text","userpage-top__buttons__container":"userpage-top__buttons__container"}},641:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(12),s=r(10),i=r(14),u=r.n(i),c=r(15),p=r.n(c),l=r(1),f=r.n(l),h=r(310),d=r(307),m=r(7);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var a=C(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(s,e);var t,r,n,o=E(s);function s(){var e;k(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={user:e.props.user,menuitems:{gender:!1,age:!1,countries:!1,birthday:!1},search:{countries:{results:[],value:""}},text:{city:e.props.user.city,height:e.props.user.height,weight:e.props.user.weight,birthday:e.props.user.birthday},textarea:{aboutme:e.props.user.aboutme||"",lookingfor:e.props.user.lookingfor||""}},e.clickHandler=function(t){return function(r){r.preventDefault();var n=v({},e.state.menuitems);n[t]=!n[t],e.setState({menuitems:n})}},e.optionClickHandler=function(t,r){return function(n){n.preventDefault();var a=v({},e.state.user),o=v({},e.state.menuitems),s={item:t,option:r,userId:e.props.user.id};u()({method:"post",url:"profile/update",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:p.a.stringify(s)}).then((function(){a[t]=r,o[t]=!o[t],e.setState({user:a,menuitems:o})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.optionManyClickHandler=function(t,r){return function(n){n.preventDefault();var a,o=v({},e.state.user);if(o[t].includes(r)){var s=o[t].filter((function(e){return e!==r}));o[t]=s,a=o[t].join(", ")}else o[t].push(r),a=o[t].join(", ");var i={item:t,option:a,userId:e.props.user.id};u()({method:"post",url:"profile/update",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:p.a.stringify(i)}).then((function(){e.setState({user:o})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.searchChangeHandler=function(t){return function(r){r.preventDefault();var n=r.target.value,a={input:n,lng:e.props.lng,type:t},o=v({},e.state.search);u()({method:"post",url:"profile/searchprofile",data:p.a.stringify(a),headers:{Authorization:"Bearer ".concat(e.props.user.token)}}).then((function(r){console.log(r.data),o[t].results=r.data.countries,o[t].value=n,e.setState({search:o})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.searchSubmitHandler=function(t,r){return function(){var n;"countries"===t&&(n="country_id");var a={item:n,option:r.country_id,userId:e.props.user.id};u()({method:"post",url:"profile/update",data:p.a.stringify(a),headers:{Authorization:"Bearer ".concat(e.props.user.token)}}).then((function(){var n=v({},e.state.menuitems),a=v({},e.state.user);"countries"===t&&(a.country=r.title),n[t]=!n[t],e.setState({menuitems:n,user:a})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.textChangeHandler=function(t){return function(r){r.preventDefault();var n=v({},e.state.text);n[t]=r.target.value,e.setState({text:n})}},e.textSubmitHandler=function(t){return function(r){r.preventDefault();var n={item:t,option:e.state.text[t],userId:e.props.user.id};u()({method:"post",url:"profile/update",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:p.a.stringify(n)}).then((function(){var r=v({},e.state.menuitems),n=v({},e.state.user);n[t]=e.state.text[t],"birthday"===t?r.age=!r.age:r[t]=!r[t],e.setState({menuitems:r,user:n})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.textareaChangeHandler=function(t){return function(r){r.preventDefault();var n=v({},e.state.textarea);n[t]=r.target.value,e.setState({textarea:n})}},e.submitTextHandler=function(t){return function(r){r.preventDefault();var n={item:t,option:e.state.textarea[t],userId:e.props.user.id};u()({method:"post",url:"profile/update",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:p.a.stringify(n)}).then((function(){var r=v({},e.state.user);r[t]=e.state.textarea[t],e.setState({user:r})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.updateUser=function(t,r){var n=v({},e.state.user);n[t]=r,e.setState({user:n})},e.addMarker=function(t){var r={item:"coordinates",option:t.latlng,userId:e.props.user.id};u()({method:"post",url:"profile/update",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:p.a.stringify(r)}).then((function(){var r=v({},e.state.user);r.lat=t.latlng.lat,r.lng=t.latlng.lng,e.setState({user:r})})).catch((function(t){e.props.addError(t.response.data.message)}))},e}return t=s,(r=[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{user:this.state.user,profile:!0}),a.a.createElement(h.a,y({},this.props,{clickHandler:this.clickHandler,menuitems:this.state.menuitems,user:this.state.user,activeMenu:this.props.activeMenu,menuClick:this.props.menuClick,photoClick:this.props.photoClick,photoOpened:this.props.photoOpened,photoClose:this.props.photoClose,photoIndex:this.props.photoIndex,posts:this.props.posts,profile:!0,optionClickHandler:this.optionClickHandler,search:this.state.search,searchChangeHandler:this.searchChangeHandler,textChangeHandler:this.textChangeHandler,textSubmitHandler:this.textSubmitHandler,optionManyClickHandler:this.optionManyClickHandler,text:this.state.text,searchSubmitHandler:this.searchSubmitHandler,textarea:this.state.textarea,textareaChangeHandler:this.textareaChangeHandler,submitTextHandler:this.submitTextHandler,updateUser:this.updateUser,addMarker:this.addMarker})))}}])&&x(t.prototype,r),n&&x(t,n),s}(n.Component),j={addError:m.c};S.propTypes={user:f.a.shape({id:f.a.number,country:f.a.string,city:f.a.string,height:f.a.number,weight:f.a.number,token:f.a.string,birthday:f.a.string,aboutme:f.a.string,lookingfor:f.a.string}),activeMenu:f.a.string,menuClick:f.a.func,photoClick:f.a.func,photoOpened:f.a.bool,photoClose:f.a.func,photoIndex:f.a.number,posts:f.a.arrayOf(f.a.shape({id:f.a.string})),profile:f.a.bool,lng:f.a.string,addError:f.a.func};var H=Object(o.b)((function(e){return{lng:e.lng,error:e.error}}),j)(S),P=r(16);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var a=T(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return N(this,r)}}function N(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(s,e);var t,r,n,o=R(s);function s(){var e;M(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={isLoaded:!1,blogs:[],user:{},activeMenu:"main",photoOpened:!1,photoIndex:0,posts:[]},e.menuClick=function(t){return function(){e.setState({activeMenu:t})}},e.photoClick=function(t){return function(){e.setState({photoOpened:!0,photoIndex:t})}},e.photoClose=function(t){t.preventDefault(),e.setState({photoOpened:!1,photoIndex:0})},e}return t=s,(r=[{key:"componentDidMount",value:function(){var e=this,t={userId:this.props.user.userId,lng:this.props.lng.short};u()({method:"post",url:"/profile/",headers:{Authorization:"Bearer ".concat(this.props.user.token)},data:p.a.stringify(t)}).then((function(t){var r=t.data.user;r.token=e.props.user.token,e.setState({user:r,isLoaded:!0})})).catch((function(t){e.props.addError(t.response.data.message)}))}},{key:"render",value:function(){var e=a.a.createElement(a.a.Fragment,null,a.a.createElement(H,{user:this.state.user,activeMenu:this.state.activeMenu,menuClick:this.menuClick,photoClick:this.photoClick,photoOpened:this.state.photoOpened,photoClose:this.photoClose,photoIndex:this.state.photoIndex,posts:this.state.posts,lng:this.props.lng.short}));return this.state.isLoaded?e:a.a.createElement(P.a,null)}}])&&I(t.prototype,r),n&&I(t,n),s}(n.Component),B={addError:m.c};z.propTypes={match:f.a.shape({params:f.a.shape({id:f.a.string})}),user:f.a.shape({userId:f.a.string,token:f.a.string}),lng:f.a.shape({short:f.a.string}),addError:f.a.func};t.default=Object(s.f)(Object(o.b)((function(e){return{user:e.user,lng:e.lng}}),B)(z))}}]);
//# sourceMappingURL=9.bundle.js.map