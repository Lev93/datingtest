(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{612:function(e,t,s){var a=s(9),_=s(613);"string"==typeof(_=_.__esModule?_.default:_)&&(_=[[e.i,_,""]]);var n={insert:"head",singleton:!1};a(_,n);e.exports=_.locals||{}},613:function(e,t,s){e.exports={messages:"messages",messages__contacts:"messages__contacts",messages__contacts__header:"messages__contacts__header",messages__contacts__header__title:"messages__contacts__header__title","messages__contacts__header__undertitle-container":"messages__contacts__header__undertitle-container",messages__contacts__header__undertitle__select:"messages__contacts__header__undertitle__select",messages__contacts__header__undertitle__search:"messages__contacts__header__undertitle__search",messages__contacts__header__undertitle__search__input:"messages__contacts__header__undertitle__search__input",messages__contacts__header__undertitle__search__button:"messages__contacts__header__undertitle__search__button",messages__contacts__header__undertitle__search__button__svg:"messages__contacts__header__undertitle__search__button__svg",messages__contacts__list:"messages__contacts__list",messages__contacts__list__item:"messages__contacts__list__item",messages__contacts__list__item__link:"messages__contacts__list__item__link",messages__contacts__list__item__link__avatar:"messages__contacts__list__item__link__avatar",messages__contacts__list__item__link__avatar__img:"messages__contacts__list__item__link__avatar__img","messages__contacts__list__item__link__avatar--active-online":"messages__contacts__list__item__link__avatar--active-online","messages__contacts__list__item__link__avatar--active-offline":"messages__contacts__list__item__link__avatar--active-offline","messages__contacts__list__item__link__avatar--notactive-online":"messages__contacts__list__item__link__avatar--notactive-online","messages__contacts__list__item__link__avatar--notactive-offline":"messages__contacts__list__item__link__avatar--notactive-offline","messages__contacts__list__item__link__avatar--blocked":"messages__contacts__list__item__link__avatar--blocked",messages__contacts__list__item__link__content:"messages__contacts__list__item__link__content",messages__contacts__list__item__link__content__info:"messages__contacts__list__item__link__content__info",messages__contacts__list__item__link__content__info__name:"messages__contacts__list__item__link__content__info__name",messages__contacts__list__item__link__content__info__time:"messages__contacts__list__item__link__content__info__time",messages__contacts__list__item__link__content__text:"messages__contacts__list__item__link__content__text",messages__contacts__list__item__link__content__text__p:"messages__contacts__list__item__link__content__text__p",messages__contacts__list__item__link__content__text__new:"messages__contacts__list__item__link__content__text__new",messages__contacts__list__item__link__content__text__p__black:"messages__contacts__list__item__link__content__text__p__black",messages__text:"messages__text",visible:"visible",messages__text__header:"messages__text__header",messages__text__header__back:"messages__text__header__back",messages__text__header__back__svg:"messages__text__header__back__svg",messages__text__header__name:"messages__text__header__name",messages__text__header__name__nameonline:"messages__text__header__name__nameonline",messages__text__header__name__name:"messages__text__header__name__name",messages__text__header__name__online:"messages__text__header__name__online",messages__text__main:"messages__text__main",messages__text__main__conteiner:"messages__text__main__conteiner","messages__text__main__conteiner__maessages-block__date":"messages__text__main__conteiner__maessages-block__date","messages__text__main__conteiner__maessages-block__message":"messages__text__main__conteiner__maessages-block__message",self:"self",automatic:"automatic","messages__text__main__conteiner__maessages-block__message__wrapper":"messages__text__main__conteiner__maessages-block__message__wrapper",dialog__button__wrapper:"dialog__button__wrapper",dialog__button:"dialog__button",accept:"accept",decline:"decline","messages__text__main__conteiner__maessages-block__message__time":"messages__text__main__conteiner__maessages-block__message__time",messages__text__footer:"messages__text__footer",messages__text__footer__conteiner:"messages__text__footer__conteiner","messages__text__footer__input-block":"messages__text__footer__input-block","messages__text__footer__input-block__button":"messages__text__footer__input-block__button","messages__text__footer__input-block__button__svg":"messages__text__footer__input-block__button__svg","messages__text__footer__input-block__textarea":"messages__text__footer__input-block__textarea","messages__text__footer__input-block__send":"messages__text__footer__input-block__send","messages__text__footer__input-block__send__svg":"messages__text__footer__input-block__send__svg",messages__text__header__name__blockButton_container:"messages__text__header__name__blockButton_container",messages__text__header__name__name__link:"messages__text__header__name__name__link",smiles__conteiner:"smiles__conteiner",smiles:"smiles",smiles_smile:"smiles_smile","messages-backdrop":"messages-backdrop"}},633:function(e,t,s){"use strict";s.r(t);var a=s(0),_=s.n(a),n=s(12),c=s(1),r=s.n(c),o=s(14),i=s.n(o),l=s(15),m=s.n(l),u=s(3),d=s(97),g=s(214),p=s(16),f=(s(612),s(7)),v=s(60);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function x(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,a=O(e);if(t){var _=O(this).constructor;s=Reflect.construct(a,arguments,_)}else s=a.apply(this,arguments);return I(this,s)}}function I(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){return Date.now()-e<864e5?e.toLocaleTimeString():e.toLocaleDateString()},j=["ðŸ˜„","ðŸ˜Š","ðŸ˜ƒ","ðŸ˜‰","ðŸ˜","ðŸ˜˜","ðŸ˜š","ðŸ˜³","ðŸ˜Œ","ðŸ˜","ðŸ˜œ","ðŸ˜","ðŸ˜’","ðŸ˜","ðŸ˜“","ðŸ˜”","ðŸ˜ž","ðŸ˜±","ðŸ˜ ","ðŸ˜¡","ðŸ˜ª","ðŸ˜·","ðŸ‘¿","ðŸ‘«"],M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(c,e);var t,s,a,n=S(c);function c(){var e;y(this,c);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return(e=n.call.apply(n,[this].concat(s))).state={isLoaded:!1,contacts:[],activeContact:{empty:!0},activeContactDates:[],chat:"",messages:[],newMessage:"",filter:"active",searchValue:"",smiles:!1},e.addWriting=function(t){console.log(t);var s=x(e.state.contacts),a=s.findIndex((function(e){return e.second_user_id===Number.parseInt(t.sender_id,10)}));if(-1!==a&&(s[a].write=t.input,e.setState({contacts:s}),e.state.activeContact.second_user_id===t.sender_id)){var _=k({},e.state.activeContact);_.write=t.input,e.setState({activeContact:_})}},e.updateOnline=function(t){var s=x(e.state.contacts),a=s.findIndex((function(e){return e.second_user_id===Number.parseInt(t,10)}));if(-1!==a&&(s[a].online=1,e.setState({contacts:s}),e.state.activeContact.second_user_id===t)){var _=k({},e.state.activeContact);_.online=1,e.setState({activeContact:_})}},e.updateOffline=function(t){var s=x(e.state.contacts),a=s.findIndex((function(e){return e.second_user_id===Number.parseInt(t,10)}));if(-1!==a&&(s[a].online=0,e.setState({contacts:s}),e.state.activeContact.second_user_id===t)){var _=k({},e.state.activeContact);_.online=0,_.last_online=new Date(Date.now().toLocaleString()),e.setState({ctiveContact:_})}},e.addMessage=function(t){var s=x(e.state.messages);s.push(t);var a=x(e.state.activeContactDates);a.write=!1;var _=new Date(t.message_created_at).toLocaleDateString();a.includes(_)||a.push(_);var n=x(e.state.contacts),c=n.findIndex((function(e){return e.second_user_id===t.sender_id}));if(n[c].last_message=t.message,n[c].date=t.message_created_at,n[c].write=!1,"blocked"===t.message&&(n[c].status="blocked"),"requestAccepted"===t.message&&(n[c].status="active"),e.state.activeContact.second_user_id!==n[c].second_user_id)n[c].new_messages+=1;else{e.props.removeMessages(1);var r=e.state.activeContact;"blocked"===t.message&&(r.status="blocked",e.setState({activeContact:r})),"requestAccepted"===t.message&&(r.status="active",e.setState({activeContact:r}))}e.setState({messages:s,contacts:n,activeContactDates:a})},e.openChat=function(t){return function(){var s=[],a={userId:e.props.user.userId,second_user_id:t.second_user_id};i()({method:"post",url:"/messages/messages",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:m.a.stringify(a)}).then((function(a){for(var _=a.data.messages,n=0;n<_.length;n+=1){var c=new Date(_[n].message_created_at).toLocaleDateString();s.push(c)}var r=s.filter((function(e,t){return s.indexOf(e)===t})),o=x(e.state.contacts),i=o.findIndex((function(e){return e.contact_created_at===t.contact_created_at})),l=o[i].new_messages;e.props.removeMessages(l),o[i].new_messages=0,e.setState({chat:"visible",activeContact:t,messages:_,activeContactDates:r,contacts:o})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.closeContact=function(){e.setState({chat:"",activeContact:{empty:!0}})},e.changeStatus=function(t){var s={first_user_id:e.state.activeContact.first_user_id,second_user_id:e.state.activeContact.second_user_id,newstatus:t};i()({method:"post",url:"/messages/changestatus",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:m.a.stringify(s)}).then((function(s){var a="requestAccepted";"declined"===t&&(a="requestDeclined"),"blocked"===t&&(a="blocked");var _=k({},e.state.activeContact),n=x(e.state.contacts);_.status=t,_.last_message=a;var c=n.findIndex((function(e){return e.contact_created_at===_.contact_created_at}));n[c].status=t,n[c].last_message=a;var r=x(e.state.messages),o=s.data.message;r.push(o),e.setState({activeContact:_,contacts:n,messages:r})})).catch((function(t){e.props.addError(t.response.data.message)}))},e.inputChange=function(t){1===t.target.value.length&&v.a.emit("input",{sender_id:e.props.user.userId,receiver_id:e.state.activeContact.second_user_id,status:!0}),0===t.target.value.length&&v.a.emit("input",{sender_id:e.props.user.userId,receiver_id:e.state.activeContact.second_user_id,status:!1}),e.setState({newMessage:t.target.value})},e.seachContactsInput=function(t){e.setState({searchValue:t.target.value})},e.searchContacts=function(){var t={userId:e.props.user.userId,searchValue:e.state.searchValue};i()({method:"post",url:"/messages/searchContacts/",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:m.a.stringify(t)}).then((function(t){e.setState({contacts:t.data.contacts,searchValue:""})})).catch((function(t){e.props.addError(t.response.data.message)}))},e.sendMessage=function(){if(!(e.state.newMessage.length<0)){var t={sender_id:e.props.user.userId,receiver_id:e.state.activeContact.second_user_id,message:e.state.newMessage};i()({method:"post",url:"/messages/newmessage/",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:m.a.stringify(t)}).then((function(t){var s=t.data.message;e.setState((function(e){var t=x(e.messages);t.push(s);var a=x(e.contacts),_=a.findIndex((function(e){return e.second_user_id===s.receiver_id}));return a[_].last_message=s.message,a[_].date=s.message_created_at,{messages:t,contacts:a,newMessage:""}}))})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.contactsFilter=function(t){var s=t.target.value,a={userId:e.props.user.userId,filter:s};i()({method:"post",url:"/messages/filter",headers:{Authorization:"Bearer ".concat(e.props.user.token)},data:m.a.stringify(a)}).then((function(t){e.setState({isLoaded:!0,contacts:t.data.contacts,filter:s})})).catch((function(t){e.props.addError(t.response.data.message)}))},e.openSmiles=function(){e.setState((function(e){return{smiles:!e.smiles}}))},e.closeSmeiles=function(){e.setState((function(e){return{smiles:!e.smiles}}))},e.addSmile=function(t){e.setState((function(e){return{newMessage:e.newMessage.concat(t)}}))},e.renderMessage=function(t){var s=!1;"request sent"===t.message&&(s=!0),"requestAccepted"===t.message&&(s=!0),"requestDeclined"===t.message&&(s=!0),"blocked"===t.message&&(s=!0);var a=["messages__text__main__conteiner__maessages-block__message",t.sender_id===Number.parseInt(e.props.user.userId,10)?"self":"",s?"automatic":""],n=_.a.createElement("span",null,_.a.createElement(d.a,null,"messages.status.",t.message));return"request sent"===t.message&&t.receiver_id===Number.parseInt(e.props.user.userId,10)?n=_.a.createElement("div",null,_.a.createElement("p",null,_.a.createElement(d.a,null,"messages.status.request")),"request waiting"===e.state.activeContact.status?_.a.createElement("div",{className:"dialog__button__wrapper"},_.a.createElement("button",{className:"dialog__button accept",onClick:function(){return e.changeStatus("active")}},_.a.createElement(d.a,null,"messages.status.accept")),_.a.createElement("button",{className:"dialog__button decline",onClick:function(){return e.changeStatus("declined")}},_.a.createElement(d.a,null,"messages.status.decline"))):null):"blocked"===t.message&&t.sender_id===Number.parseInt(e.props.user.userId,10)?n=_.a.createElement("div",null,_.a.createElement("p",null,_.a.createElement(d.a,null,"messages.status.blocked")),"blocked"===e.state.activeContact.status&&e.state.messages[e.state.messages.length-1].sender_id===Number.parseInt(e.props.user.userId,10)?_.a.createElement("div",{className:"dialog__button__wrapper"},_.a.createElement("button",{className:"dialog__button accept",onClick:function(){return e.changeStatus("active")}},_.a.createElement(d.a,null,"messages.status.restore"))):null):"blocked"===t.message&&t.receiver_id===Number.parseInt(e.props.user.userId,10)?n=_.a.createElement("div",null,_.a.createElement("p",null,_.a.createElement(d.a,null,"messages.status.blockedByUser"))):"requestDeclined"===t.message&&t.sender_id===Number.parseInt(e.props.user.userId,10)?n=_.a.createElement("p",null,_.a.createElement(d.a,null,"messages.status.requestDeclinedUser")):"requestAccepted"===t.message&&t.sender_id===Number.parseInt(e.props.user.userId,10)&&(n=_.a.createElement("p",null,_.a.createElement(d.a,null,"messages.status.requestAcceptedUser"))),_.a.createElement("div",{className:a.join(" "),key:"message-".concat(t.message_id)},_.a.createElement("div",{className:"messages__text__main__conteiner__maessages-block__message__wrapper"},s?n:_.a.createElement("span",null,t.message)),_.a.createElement("div",{className:"messages__text__main__conteiner__maessages-block__message__time"},_.a.createElement("span",null,new Date(t.message_created_at).toLocaleTimeString())))},e.renderMessages=function(){return _.a.createElement(_.a.Fragment,null,e.state.activeContactDates.map((function(t){var s=t;t===(new Date).toLocaleDateString()&&(s=_.a.createElement(d.a,null,"messages.today")),t===new Date(Date.now()-864e5).toLocaleDateString()&&(s=_.a.createElement(d.a,null,"messages.yesterday"));var a=e.state.messages.filter((function(e){return new Date(e.message_created_at).toLocaleDateString()===t}));return _.a.createElement("div",{key:t,className:"messages__text__main__conteiner__maessages-block"},_.a.createElement("div",{className:"messages__text__main__conteiner__maessages-block__date"},s),a.map((function(t){return e.renderMessage(t)})))})),e.state.activeContact.write?_.a.createElement("div",{className:"messages__text__main__conteiner__maessages-block"},_.a.createElement("div",{className:"messages__text__main__conteiner__maessages-block__message  automatic"},_.a.createElement("div",{className:"messages__text__main__conteiner__maessages-block__message__wrapper"},_.a.createElement("span",null,_.a.createElement(d.a,null,"messages.writing"))))):null)},e.scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:"smooth"})},e}return t=c,(s=[{key:"componentDidMount",value:function(){var e=this;this.props.hideFooter();var t={userId:this.props.user.userId};this.props.chatParameters.length>0&&(t.second_user_id=this.props.chatParameters),i()({method:"post",url:"/messages/",headers:{Authorization:"Bearer ".concat(this.props.user.token)},data:m.a.stringify(t)}).then((function(t){e.setState({isLoaded:!0,contacts:t.data.contacts}),e.scrollToBottom()})).catch((function(t){e.props.addError(t.response.data.message)})),v.a.on("new_msg",(function(t){e.addMessage(t.message)})),v.a.on("new_online",(function(t){e.updateOnline(t.userId)})),v.a.on("new_offline",(function(t){e.updateOffline(t.userId)})),v.a.on("input_result",(function(t){e.addWriting(t)}))}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){this.props.showFooter()}},{key:"render",value:function(){var e=this,t=_.a.createElement("section",{className:"messages"},_.a.createElement("div",{className:"messages__contacts"},_.a.createElement("div",{className:"messages__contacts__header"},_.a.createElement("div",{className:"messages__contacts__header__title-container"},_.a.createElement("h5",{className:"messages__contacts__header__title"},_.a.createElement(d.a,null,"messages.title"))),_.a.createElement("div",{className:"messages__contacts__header__undertitle-container"},_.a.createElement("select",{className:"messages__contacts__header__undertitle__select",onChange:this.contactsFilter,value:this.state.filter},_.a.createElement("option",{value:"active"},this.props.t("messages.filter.active")),_.a.createElement("option",{value:"all"},this.props.t("messages.filter.all")),_.a.createElement("option",{value:"unread"},this.props.t("messages.filter.unread")),_.a.createElement("option",{value:"declined"},this.props.t("messages.filter.blocked")),_.a.createElement("option",{value:"request waiting"},this.props.t("messages.filter.new")),_.a.createElement("option",{value:"request sent"},this.props.t("messages.filter.usersRequests"))),_.a.createElement("div",{className:"messages__contacts__header__undertitle__search"},_.a.createElement("input",{type:"text",className:"messages__contacts__header__undertitle__search__input",placeholder:this.props.t("messages.searchplaceholder"),value:this.state.searchValue,onChange:this.seachContactsInput}),_.a.createElement("div",{className:"messages__contacts__header__undertitle__search__button",onClick:this.searchContacts},_.a.createElement("svg",{className:"messages__contacts__header__undertitle__search__button__svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})))))),_.a.createElement("ul",{className:"messages__contacts__list"},this.state.contacts.map((function(t){var s=["messages__contacts__list__item__link__avatar",t.second_user_id===e.state.activeContact.second_user_id&&t.online?"messages__contacts__list__item__link__avatar--active-online":"",t.second_user_id!==e.state.activeContact.second_user_id||t.online?"":"messages__contacts__list__item__link__avatar--active-offline",t.second_user_id!==e.state.activeContact.second_user_id&&t.online?"messages__contacts__list__item__link__avatar--notactive-online":"",t.second_user_id===e.state.activeContact.second_user_id||t.online?"":"messages__contacts__list__item__link__avatar--notactive-offline","active"!==t.status?"messages__contacts__list__item__link__avatar--blocked":""],a=t.last_message;return"request sent"===t.last_message&&"request waiting"===t.status&&(a=_.a.createElement(d.a,null,"messages.status.request")),"request sent"===t.last_message&&"request sent"===t.status&&(a=_.a.createElement(d.a,null,"messages.status.request sent")),"requestAccepted"===t.last_message&&(a=_.a.createElement(d.a,null,"messages.status.requestAccepted")),"requestDeclined"===t.last_message&&(a=_.a.createElement(d.a,null,"messages.status.requestDeclined")),"blocked"===t.last_message&&(a=_.a.createElement(d.a,null,"messages.status.blocked")),t.write&&(a=_.a.createElement(d.a,null,"messages.writing")),_.a.createElement("li",{className:["messages__contacts__list__item"].join(" "),key:"contact-".concat(t.contact_id)},_.a.createElement("a",{className:"messages__contacts__list__item__link",onClick:e.openChat(t)},_.a.createElement("div",{className:s.join(" ")},_.a.createElement("img",{src:t.avatar,className:"messages__contacts__list__item__link__avatar__img"})),_.a.createElement("div",{className:"messages__contacts__list__item__link__content"},_.a.createElement("div",{className:"messages__contacts__list__item__link__content__info"},_.a.createElement("h6",{className:"messages__contacts__list__item__link__content__info__name"},t.name),_.a.createElement("div",{className:"messages__contacts__list__item__link__content__info__time"},t.date?D(new Date(t.date)):D(new Date(t.contact_created_at)))),_.a.createElement("div",{className:"messages__contacts__list__item__link__content__text"},_.a.createElement("p",{className:["messages__contacts__list__item__link__content__text__p",t.new_messages>0?"messages__contacts__list__item__link__content__text__p__black":""].join(" ")},a),t.new_messages>0?_.a.createElement("div",{className:"messages__contacts__list__item__link__content__text__new"},t.new_messages):null))))})),0===this.state.contacts.length?_.a.createElement("li",null,_.a.createElement(d.a,null,"messages.contactsNone")):null)),_.a.createElement("div",{className:["messages__text",this.state.chat].join(" ")},_.a.createElement("div",{className:"messages__text__header"},_.a.createElement("button",{type:"button",className:"messages__text__header__back",onClick:this.closeContact},_.a.createElement("svg",{className:"messages__text__header__back__svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"}))),_.a.createElement("div",{className:"messages__text__header__name"},_.a.createElement("div",{className:["messages__contacts__list__item__link__avatar",this.state.activeContact.online?"messages__contacts__list__item__link__avatar--notactive-online":"messages__contacts__list__item__link__avatar--notactive-offline"].join(" ")},_.a.createElement("img",{src:this.state.activeContact.avatar,className:"messages__contacts__list__item__link__avatar__img"})),_.a.createElement("div",{className:"messages__text__header__name__nameonline"},_.a.createElement("h6",{className:"messages__text__header__name__name"},_.a.createElement(u.b,{to:"/community/".concat(this.state.activeContact.second_user_id),className:"messages__text__header__name__name__link"},this.state.activeContact.name)),this.state.activeContact.name?1===this.state.activeContact.online?_.a.createElement("small",{className:"messages__text__header__name__online"},"Online"):_.a.createElement("small",{className:"messages__text__header__name__online"},_.a.createElement(d.a,null,"messages.wasOnline")," ",new Date(this.state.activeContact.last_online).toLocaleDateString()):null)),_.a.createElement("div",{className:"messages__text__header__name__blockButton_container"},"active"===this.state.activeContact.status?_.a.createElement("a",{className:"messages__text__header__name__blockButton",onClick:function(){return e.changeStatus("blocked")}},_.a.createElement(d.a,null,"messages.block")):null)),_.a.createElement("div",{className:"messages__text__main"},_.a.createElement("div",{className:"messages__text__main__conteiner"},this.renderMessages(),_.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))),_.a.createElement("div",{className:"messages__text__footer"},_.a.createElement("div",{className:"messages__text__footer__conteiner"},_.a.createElement("div",{className:"messages__text__footer__input-block"},_.a.createElement("button",{type:"button",className:"messages__text__footer__input-block__button",disabled:"active"!==this.state.activeContact.status},_.a.createElement("svg",{className:"messages__text__footer__input-block__button__svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))),_.a.createElement("button",{type:"button",className:"messages__text__footer__input-block__button",disabled:"active"!==this.state.activeContact.status,onClick:this.openSmiles},_.a.createElement("svg",{className:"messages__text__footer__input-block__button__svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),this.state.smiles?_.a.createElement("div",{className:"smiles__conteiner"},_.a.createElement("ul",{className:"smiles"},j.map((function(t){return _.a.createElement("li",{key:t,className:"smiles_smile",onClick:function(){return e.addSmile(t)}},t)})))):null,this.state.smiles?_.a.createElement("div",{className:"messages-backdrop",onClick:this.closeSmeiles}):null,_.a.createElement("textarea",{className:"messages__text__footer__input-block__textarea",placeholder:this.props.t("messages.write"),disabled:"active"!==this.state.activeContact.status,onChange:this.inputChange,value:this.state.newMessage}),_.a.createElement("button",{type:"button",className:"messages__text__footer__input-block__send",disabled:"active"!==this.state.activeContact.status,onClick:this.sendMessage},_.a.createElement("svg",{className:"messages__text__footer__input-block__send__svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"}))))))));return this.state.isLoaded?t:_.a.createElement(p.a,null)}}])&&C(t.prototype,s),a&&C(t,a),c}(a.Component),q={addError:f.c,showFooter:f.m,hideFooter:f.j,removeMessages:f.k};M.propTypes={t:r.a.func,user:r.a.shape({userId:r.a.number,token:r.a.string}),addError:r.a.func,chatParameters:r.a.string,showFooter:r.a.func,hideFooter:r.a.func,removeMessages:r.a.func},t.default=Object(g.a)()(Object(n.b)((function(e){return{user:e.user,chatParameters:e.chatParameters}}),q)(M))}}]);
//# sourceMappingURL=14.bundle.js.map