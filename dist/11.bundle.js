(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{618:function(e,t,a){var r=a(9),s=a(619);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var n={insert:"head",singleton:!1};r(s,n);e.exports=s.locals||{}},619:function(e,t,a){e.exports={"community-results":"community-results","community-results__title__container":"community-results__title__container","community-results__title":"community-results__title","community-results__results":"community-results__results","community-results__no-results":"community-results__no-results","community-results__results__user":"community-results__results__user","community-results__results__user__avatar__conteiner":"community-results__results__user__avatar__conteiner","community-results__results__user__avatar":"community-results__results__user__avatar","community-results__results__user__name":"community-results__results__user__name","community-results__results__user__infos":"community-results__results__user__infos","community-results__results__user__info":"community-results__results__user__info",pages:"pages",pages__link:"pages__link","pages__link--active":"pages__link--active","community-results__sort__conteiner":"community-results__sort__conteiner","community-results__sort":"community-results__sort","community-results__sort--active":"community-results__sort--active","community-results__sort_title":"community-results__sort_title","community-results__sort--asc":"community-results__sort--asc","community-results__sort--desc":"community-results__sort--desc"}},639:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(12),o=a(1),c=a.n(o),u=a(14),i=a.n(u),l=a(15),m=a.n(l),_=a(64),p=a(416),y=a(97),f=a(3),g=a(31),d=(a(618),function(e){var t=function(t){var a="ASC"===e.sortDirections?"community-results__sort--asc":"community-results__sort--desc";return["community-results__sort",t===e.sortType?"community-results__sort--active":"",t===e.sortType?a:""].join(" ")};return s.a.createElement("section",{className:"community-results"},s.a.createElement("div",{className:"community-results__title__container"},s.a.createElement("h3",{className:"community-results__title"},s.a.createElement(y.a,null,"community.searchResults")),s.a.createElement("img",{src:g.a})),s.a.createElement("div",{className:"community-results__sort__conteiner"},s.a.createElement("p",{className:"community-results__sort_title"},s.a.createElement(y.a,null,"community.sort.sortby")),s.a.createElement("a",{className:t("created_at"),onClick:e.sortHandler("created_at")},s.a.createElement(y.a,null,"community.sort.byregistrationdate")),s.a.createElement("a",{className:t("birthday"),onClick:e.sortHandler("birthday")},s.a.createElement(y.a,null,"community.sort.byage")),s.a.createElement("a",{className:t("last_online"),onClick:e.sortHandler("last_online")},s.a.createElement(y.a,null,"community.sort.bylastonline"))),s.a.createElement("div",{className:"community-results__results"},e.users.length>0?s.a.createElement(s.a.Fragment,null,e.users.map((function(e){return s.a.createElement("div",{className:"community-results__results__user",key:e.id},s.a.createElement("div",{className:"community-results__results__user__avatar__conteiner"},s.a.createElement("img",{src:e.avatar,className:"community-results__results__user__avatar"})),s.a.createElement(f.b,{to:"/community/".concat(e.id),className:"community-results__results__user__name"},e.name),s.a.createElement("div",{className:"community-results__results__user__infos"},s.a.createElement("span",{className:"community-results__results__user__info"},(r=e.birthday,Math.floor((Date.now()-new Date(r))/31536e6)),s.a.createElement(y.a,null,"MainPage.age")),s.a.createElement("span",{className:"community-results__results__user__info"},s.a.createElement(y.a,null,"community.city"),e.city),s.a.createElement("span",{className:"community-results__results__user__info"},s.a.createElement(y.a,null,"community.lastonline"),(t=e.last_online,(a=Date.now()-new Date(t))<36e5?s.a.createElement(s.a.Fragment,null,Math.floor(a/6e4),s.a.createElement(y.a,null,"community.minAgo")):a<864e5?s.a.createElement(s.a.Fragment,null,Math.floor(a/36e5),s.a.createElement(y.a,null,"community.hoursAgo")):s.a.createElement(s.a.Fragment,null,Math.floor(a/864e5),s.a.createElement(y.a,null,"community.daysAgo"))))));var t,a,r}))):s.a.createElement("p",{className:"community-results__no-results"},s.a.createElement(y.a,null,"community.noResults"))),s.a.createElement("div",{className:"pages"},0===e.users.length&&1===e.activPage?null:e.pages.map((function(t){return s.a.createElement("a",{key:"page-".concat(t),onClick:e.pageHandler(t),className:t===e.activPage?"pages__link--active":"pages__link"},t)})),48===e.users.length?s.a.createElement("a",{className:"pages__link",onClick:e.nextPageHandler},s.a.createElement(y.a,null,"community.next")):null))});d.propTypes={users:c.a.arrayOf(c.a.shape({id:c.a.string,name:c.a.string,avatar:c.a.string})),pages:c.a.array,activPage:c.a.number,nextPageHandler:c.a.func,pageHandler:c.a.func,sortType:c.a.string,sortDirections:c.a.string,sortHandler:c.a.func};var h=d,v=a(16),b=a(7);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=H(e);if(t){var s=H(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return N(this,a)}}function N(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,a,r,n=D(o);function o(){var e;w(this,o);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).state={isLoaded:!0,users:[],activPage:1,pages:[1],paramsForPage:"",sortType:"",sortDirections:"ASC"},e.updateMainState=function(t){e.setState(S({},t))},e.nextPageHandler=function(){var t={parameters:e.state.paramsForPage,page:e.state.activPage+1,sort:"".concat(e.state.sortType," ").concat(e.state.sortDirections)};i()({method:"post",url:"./advancedsearch",data:m.a.stringify(t),headers:{Authorization:"Bearer ".concat(e.props.user.token)}}).then((function(t){e.setState((function(e){if(e.activPage===e.pages[e.pages.length-1]){var t=e.pages[e.pages.length-1]+1;return e.pages.push(t),{pages:e.pages,activPage:t}}return{activPage:e.activPage+1}})),e.setState({users:t.data.users})})).catch((function(t){e.props.addError(t.response.data.message)}))},e.pageHandler=function(t){return function(){var a={parameters:e.state.paramsForPage,page:t,sort:"".concat(e.state.sortType," ").concat(e.state.sortDirections)};i()({method:"post",url:"./advancedsearch",data:m.a.stringify(a),headers:{Authorization:"Bearer ".concat(e.props.user.token)}}).then((function(a){e.setState({activPage:t,users:a.data.users})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e.sortHandler=function(t){return function(){var a="",r="ASC";e.state.sortType===t?("ASC"===e.state.sortDirections&&(r="DESC"),a="".concat(e.state.sortType," ").concat(r)):a="".concat(t," ").concat(r);var s={parameters:e.state.paramsForPage,page:1,sort:a};i()({method:"post",url:"./advancedsearch",data:m.a.stringify(s),headers:{Authorization:"Bearer ".concat(e.props.user.token)}}).then((function(a){e.setState({activPage:1,pages:[1],sortType:t,sortDirections:r}),e.setState({users:a.data.users})})).catch((function(t){e.props.addError(t.response.data.message)}))}},e}return t=o,(a=[{key:"componentDidMount",value:function(){this.props.mapSearchParameters.users.length>0&&this.setState({users:this.props.mapSearchParameters.users,paramsForPage:this.props.mapSearchParameters.params})}},{key:"render",value:function(){var e=s.a.createElement(s.a.Fragment,null,s.a.createElement(_.a,{title:"advancedSearch.title",subTittle:"advancedSearch.mainTitle"}),s.a.createElement(p.a,{updateMainState:this.updateMainState,users:this.state.users,type:"advanced"}),s.a.createElement(h,{users:this.state.users,nextPageHandler:this.nextPageHandler,pages:this.state.pages,activPage:this.state.activPage,pageHandler:this.pageHandler,sortType:this.state.sortType,sortDirections:this.state.sortDirections,sortHandler:this.sortHandler}));return this.state.isLoaded?e:s.a.createElement(v.a,null)}}])&&k(t.prototype,a),r&&k(t,r),o}(r.Component),A={addError:b.c};T.propTypes={isAuthenticated:c.a.bool,user:c.a.shape({userId:c.a.string,token:c.a.string}),lng:c.a.shape({short:c.a.string}),mapSearchParameters:c.a.shape(),addError:c.a.func};t.default=Object(n.b)((function(e){return{user:e.user,lng:e.lng,mapSearchParameters:e.mapSearchParameters}}),A)(T)}}]);
//# sourceMappingURL=11.bundle.js.map